<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Chart">

	<insert id="insert">
		insert into st_feedback values(feedback_seq.nextval, #{feedback}, #{bestmenu}, #{worstmenu}, #{parent_email}, #{school})		
	</insert>

	<select id="selectAll" resultType="kh.spring.dto.ChartDTO">
		select * from st_feedback
	</select>
	
	
		<!-- feedback -->
	<select id="feed01" resultType="Integer">
		select count(*) from st_feedback where feedback='very_good'
	</select>
	
	<select id="feed02" resultType="Integer">
		select count(*) from st_feedback where feedback='good'
	</select>
	
	<select id="feed03" resultType="Integer">
		select count(*) from st_feedback where feedback='normal'
	</select>
	
	<select id="feed04" resultType="Integer">
		select count(*) from st_feedback where feedback='very_bad'
	</select>
	
	<select id="feed05" resultType="Integer">
		select count(*) from st_feedback where feedback='bad'
	</select>
	
	
	<!-- best menu -->
	<select id="best01" resultType="Integer">
		select count(*) from st_feedback where bestmenu='korean' and parent_email=#{parent_email}
	</select>
	
	<select id="best02" resultType="Integer">
		select count(*) from st_feedback where bestmenu='japanese' and parent_email=#{parent_email}
	</select> 
	
	<select id="best03" resultType="Integer">
		select count(*) from st_feedback where bestmenu='chinese' and parent_email=#{parent_email}
	</select>
	
	<select id="best04" resultType="Integer">
		select count(*) from st_feedback where bestmenu='western' and parent_email=#{parent_email}
	</select>
	
	<select id="best05" resultType="Integer">
		select count(*) from st_feedback where bestmenu='etc' and parent_email=#{parent_email}
	</select>
	
	
	<!-- worst menu -->
	<select id="worst01" resultType="Integer">
		select count(*) from st_feedback where worstmenu='korean' and parent_email=#{parent_email}
	</select>
	
	<select id="worst02" resultType="Integer">
		select count(*) from st_feedback where worstmenu='japanese' and parent_email=#{parent_email}
	</select>
	
	<select id="worst03" resultType="Integer">
		select count(*) from st_feedback where worstmenu='chinese' and parent_email=#{parent_email}
	</select>
	
	<select id="worst04" resultType="Integer">
		select count(*) from st_feedback where worstmenu='western' and parent_email=#{parent_email}
	</select>
	
	<select id="worst05" resultType="Integer">
		select count(*) from st_feedback where worstmenu='etc' and parent_email=#{parent_email}
	</select>
	
</mapper>